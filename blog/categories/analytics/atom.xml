<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: analytics | 技术小黑屋]]></title>
  <link href="http://droidyue.com/blog/categories/analytics/atom.xml" rel="self"/>
  <link href="http://droidyue.com/"/>
  <updated>2014-07-12T21:38:54+08:00</updated>
  <id>http://droidyue.com/</id>
  <author>
    <name><![CDATA[androidyue]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[解决Octopress博客访问慢的问题]]></title>
    <link href="http://droidyue.com/blog/2014/06/22/fix-octopress-slow-loading-speed-issue-in-china-mainland/"/>
    <updated>2014-06-22T10:00:00+08:00</updated>
    <id>http://droidyue.com/blog/2014/06/22/fix-octopress-slow-loading-speed-issue-in-china-mainland</id>
    <content type="html"><![CDATA[<p>解决Octopress博客访问慢的问题</p>

<h2>本博情况</h2>

<ul>
<li>前身为<a href="http://androidyue.github.io">http://androidyue.github.io</a></li>
<li>新域名<a href="http://droidyue.com">droidyue.com</a>从<a href="http://www.godaddy.com/?ci=90231">Godaddy</a>购买。</li>
<li>DNS由<a href="https://www.dnspod.cn/">DNSPod</a>解析。</li>
<li>内容存放在<a href="https://pages.github.com/">Github Pages</a>。</li>
<li>博客系统为<a href="http://octopress.org/">Octopress</a></li>
</ul>


<!--more-->


<h2>必不可少的罗嗦</h2>

<p>买了这个域名已经一周了，已经决定博客的面向群体为汉语用户。但是发现国内访问还是超级慢，慢的让人无法接收了，当然具体原因，大家都懂得。没办法，尝试使用过安全宝，速度并没有明显替身，反而搜索引擎收录加少了，遂弃用。于是只好自己修改Octopress程序了。修改之前的访问速度以分钟计数。修改完成之后，秒开了有木有。</p>

<h2>清理没用的服务</h2>

<p>以下修改均修改<code>_config.yml</code>,以下可以根据自己的需要进行去除。</p>

<h3>去除Disqus评论</h3>

<p><img class="<a" src="href="http://droidyueimg.qiniudn.com/disques_comments.png">http://droidyueimg.qiniudn.com/disques_comments.png</a>">
去除上面红色区域的部分,打开文件找到<code>Disqus Comments</code>，按照下面在每一行前面加<strong>#</strong>注释掉即可。
```java</p>

<h1>Disqus Comments</h1>

<h1>disqus_short_name: androidyue</h1>

<h1>disqus_show_comment_count: true</h1>

<p>```</p>

<h3>去掉Github仓库展示</h3>

<p>```java</p>

<h1>Github repositories</h1>

<h1>github_user: androidyue</h1>

<h1>github_repo_count: 11</h1>

<h1>github_show_profile_link: true</h1>

<h1>github_skip_forks: true</h1>

<p>```</p>

<h3>去除Twitter按钮</h3>

<p>```java</p>

<h1>Twitter</h1>

<h1>twitter_user:</h1>

<h1>twitter_tweet_button: true</h1>

<p>```</p>

<h3>去除Google+相关</h3>

<p>```java</p>

<h1>Google +1</h1>

<h1>google_plus_one: true</h1>

<h1>google_plus_one_size: medium</h1>

<h1>Google Plus Profile</h1>

<h1>Hidden: No visible button, just add author information to search results</h1>

<h1>googleplus_user: 105362551238192049560</h1>

<h1>googleplus_hidden: false</h1>

<p>```</p>

<h3>去除Pinboard服务</h3>

<p>```java</p>

<h1>Pinboard</h1>

<h1>pinboard_user:</h1>

<h1>pinboard_count: 3</h1>

<p>```</p>

<h3>去除Delicious评论,去除后可能没有评论系统</h3>

<p>```java</p>

<h1>Delicious</h1>

<h1>delicious_user:</h1>

<h1>delicious_count: 3</h1>

<p>```</p>

<h3>去除Facebook Like</h3>

<p>```java</p>

<h1>Facebook Like</h1>

<h1>facebook_like: true</h1>

<p>```</p>

<h2>替换快速的请求资源</h2>

<p>其实，真正解决加速的重要环节可能是这里，因为Octopress很多依赖于Google的库和资源。</p>

<h3>解决Google Analytics巨慢的问题</h3>

<p>对于使用Google Analytics来说，加在ga.js这个文件简直是要命的慢，这里我使用自己存放在<a href="https://portal.qiniu.com/signup?code=3l8cqx1u74rbm">七牛CDN</a>上的js.<a href="http://droidyue-tools.qiniudn.com/ga.js">http://droidyue-tools.qiniudn.com/ga.js</a> 已验证，完全可以正常收集数据。<br/>
参考如下，修改<code>source/_includes/google_analytics.html</code>
```html</p>

<pre><code> _gaq.push(['_trackPageview']);

 (function() {
 var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
 ga.src='http://droidyue-tools.qiniudn.com/ga.js';
 var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
 })();
</code></pre>

<p>   </script>
```</p>

<h3>解决fonts.googleapis.com蜗牛慢</h3>

<p>这里我们使用数字公司提供的Google Fonts大陆解决方案，使用<code>fonts.useso.com</code>替换<code>fonts.googleapis.com</code>。<br/>
修改文件<code>/source/_includes/custom/head.html</code>
<code>html
 &lt;!--Fonts from Google"s Web font directory at http://google.com/webfonts --&gt;
&lt;link href="http://fonts.useso.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css"&gt;
&lt;link href="http://fonts.useso.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css"&gt;
</code></p>

<h3>解决ajax.googleapis.com慢的问题</h3>

<p>修改<code>source/_includes/head.html</code>
<code>html
   &lt;link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css"&gt;
   &lt;link href="/atom.xml" rel="alternate" title="技术小黑屋" type="application/atom+xml"&gt;
   &lt;script src="/javascripts/modernizr-2.0.js"&gt;&lt;/script&gt;
   &lt;script src="http://droidyue.com//ajax.useso.com/ajax/libs/jquery/1.9.1/jquery.min.js"&gt;&lt;/script&gt;
   &lt;script&gt;!window.jQuery &amp;&amp; document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))&lt;/script&gt;
   &lt;script src="/javascripts/octopress.js" type="text/javascript"&gt;&lt;/script&gt;
</code></p>

<h2>In Conclusion</h2>

<p>导致网站慢的原因其实是加载Google的资源，当然我们不能怨Google.经过测试，使用数字公司的解决方法之后，国内国外访问速度都是可以的。这里还是推荐以下数字公司的这个解决方案<a href="http://libs.useso.com/">http://libs.useso.com/</a></p>

<h2>推荐</h2>

<ul>
<li><a href="http://www.amazon.cn/gp/product/B0083S7TDW/ref=as_li_tf_tl?ie=UTF8&camp=536&creative=3200&creativeASIN=B0083S7TDW&linkCode=as2&tag=droidyue-23">60天网站流量提高20倍</a><img src="http://ir-cn.amazon-adsystem.com/e/ir?t=droidyue-23&l=as2&o=28&a=B0083S7TDW" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" /></li>
<li><a href="http://www.amazon.cn/gp/product/B003OA3VXG/ref=as_li_tf_tl?ie=UTF8&camp=536&creative=3200&creativeASIN=B003OA3VXG&linkCode=as2&tag=droidyue-23">我是怎样通过网络挣到100万的</a><img src="http://ir-cn.amazon-adsystem.com/e/ir?t=droidyue-23&l=as2&o=28&a=B003OA3VXG" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" /></li>
</ul>

]]></content>
  </entry>
  
</feed>
