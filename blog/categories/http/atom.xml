<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: HTTP | 技术小黑屋]]></title>
  <link href="http://androidyue.github.io/blog/categories/http/atom.xml" rel="self"/>
  <link href="http://androidyue.github.io/"/>
  <updated>2014-06-15T17:21:44+08:00</updated>
  <id>http://androidyue.github.io/</id>
  <author>
    <name><![CDATA[androidyue]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Load URL With Extra HTTP Headers Using WebView In Android]]></title>
    <link href="http://androidyue.github.io/blog/2014/05/27/load-url-with-extra-http-headers-using-webview-in-android/"/>
    <updated>2014-05-27T21:44:00+08:00</updated>
    <id>http://androidyue.github.io/blog/2014/05/27/load-url-with-extra-http-headers-using-webview-in-android</id>
    <content type="html"><![CDATA[<p>As we know, Webview will add the referer into the reqeust if we click a hyperlink to navigate to another one. But if we want to add a referer when a hard loading starts, What can we do to make it?<br/>
Since Froyo(API Level 8), the webview starts providing an interface for us to send extra HTTP headers when loading a URL.</p>

<blockquote><p>public void loadUrl (String url, Map&lt;String, String> additionalHttpHeaders)<br/>
Added in API level 8<br/>
Loads the given URL with the specified additional HTTP headers.<br/>
Parameters<br/>
url the URL of the resource to load<br/>
additionalHttpHeaders   the additional headers to be used in the HTTP request for this URL, specified as a map from name to value. Note that if this map contains any of the headers that are set by default by this WebView, such as those controlling caching, accept types or the User-Agent, their values may be overriden by this WebView&rsquo;s defaults.</p></blockquote>

<p>Now this is a working example.<br/>
```java
public void testLoadURLWithHTTPHeaders() {</p>

<pre><code>final String url = "http://androidyue.github.io/";
WebView webView = new WebView(getActivity());
Map&lt;String,String&gt; extraHeaders = new HashMap&lt;String, String&gt;();
extraHeaders.put("Referer", "http://www.google.com");
webView.loadUrl(url, extraHeaders);
</code></pre>

<p>}
```
For more details about HTTP Headers, please visit <a href="http://en.wikipedia.org/wiki/List_of_HTTP_header_fields">List_of_HTTP_header_fields</a>
More details about Webview, please visit <a href="http://developer.android.com/reference/android/webkit/WebView.html">http://developer.android.com/reference/android/webkit/WebView.html</a></p>

<blockquote><p>Written with <a href="https://stackedit.io/">StackEdit</a>.</p></blockquote>
]]></content>
  </entry>
  
</feed>
