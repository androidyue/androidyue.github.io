<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: try | 技术小黑屋]]></title>
  <link href="http://droidyue.com/blog/categories/try/atom.xml" rel="self"/>
  <link href="http://droidyue.com/"/>
  <updated>2014-11-29T17:38:48+08:00</updated>
  <id>http://droidyue.com/</id>
  <author>
    <name><![CDATA[androidyue]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[处理Python未捕获异常]]></title>
    <link href="http://droidyue.com/blog/2014/06/23/python-handle-uncaught-exceptions/"/>
    <updated>2014-06-23T21:01:00+08:00</updated>
    <id>http://droidyue.com/blog/2014/06/23/python-handle-uncaught-exceptions</id>
    <content type="html"><![CDATA[<h3>Talk Is Cheap</h3>

<p>和Java一样,python也提供了对于checked exception和unchecked exception. 对于checked exception,我们通常使用<strong>try except</strong>可以显示解决,对于unchecked 异常,其实也是提供回调或者是钩子来帮助我们处理的,我们可以在钩子里面记录崩溃栈追踪或者发送崩溃数据. <br/>
下面代码可以实现python unchecked exception回调,并输出日志信息.</p>

<!--more-->


<h3>Show Me The Code</h3>

<p>```python</p>

<h1>!/usr/bin/env python</h1>

<h1>coding=utf-8</h1>

<p>import os, sys
import logging
logger = logging.getLogger(<strong>name</strong>)
handler = logging.StreamHandler(stream=sys.stdout)
logger.addHandler(handler)</p>

<p>def handle_exception(exc_type, exc_value, exc_traceback):</p>

<pre><code>if issubclass(exc_type, KeyboardInterrupt):
    sys.__excepthook__(exc_type, exc_value, exc_traceback)
    return
logger.error("Uncaught exception", exc_info=(exc_type, exc_value, exc_traceback))
</code></pre>

<p>sys.excepthook = handle_exception
if <strong>name</strong> == &ldquo;<strong>main</strong>&rdquo;:</p>

<pre><code>raise RuntimeError("Test unhandled Exception")
</code></pre>

<p>```</p>

<h3>相关解释</h3>

<ul>
<li>上述忽略处理终端下键盘按Ctrl + C 终止异常.</li>
<li>上述使用python的日志管理模块输出格式化的异常信息.</li>
</ul>


<h3>参考文章</h3>

<p><a href="http://stackoverflow.com/questions/6234405/logging-uncaught-exceptions-in-python/16993115#16993115">http://stackoverflow.com/questions/6234405/logging-uncaught-exceptions-in-python/16993115#16993115</a></p>

<h3>Recommends</h3>

<ul>
<li><a href="http://www.amazon.cn/gp/product/B00EEDI2X6/ref=as_li_tf_tl?ie=UTF8&camp=536&creative=3200&creativeASIN=B00EEDI2X6&linkCode=as2&tag=droidyue-23">像计算机科学家一样思考Python</a><img src="http://ir-cn.amazon-adsystem.com/e/ir?t=droidyue-23&l=as2&o=28&a=B00EEDI2X6" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" /></li>
<li><a href="http://www.amazon.cn/gp/product/B00KYFJTP8/ref=as_li_tf_tl?ie=UTF8&camp=536&creative=3200&creativeASIN=B00KYFJTP8&linkCode=as2&tag=droidyue-23">编写高质量代码:改善Python程序的91个建议</a><img src="http://ir-cn.amazon-adsystem.com/e/ir?t=droidyue-23&l=as2&o=28&a=B00KYFJTP8" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" /></li>
</ul>

]]></content>
  </entry>
  
</feed>
