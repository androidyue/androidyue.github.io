
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Thinkblog</title>
  <meta name="author" content="androidyue">

  
  <meta name="description" content="A great application should provide a function to let users set it as the preferred or default application. In this post, I will make a description on &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://androidyue.github.io">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Thinkblog" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-43841039-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Thinkblog</a></h1>
  
    <h2>IT Technology Articles</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:androidyue.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/01/12/set-the-preferred-application-in-android/">Set the Preferred Application in Android</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-01-12T14:29:00+08:00" pubdate data-updated="true">Jan 12<span>th</span>, 2014</time>
        
         | <a href="/blog/2014/01/12/set-the-preferred-application-in-android/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>A great application should provide a function to let users set it as the preferred or default application. In this post, I will make a description on PreferredApplication<br/>
Before an application is about to be set as default, it has two possibilities. One is that there is already a default application and the other is no default application.</p>

<h3>Detect the Default Application Exists or Not</h3>

<p>This is really important. It determines what we should do next.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">public</span> <span class="kt">void</span> <span class="nf">testGetDefaultActivity</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">PackageManager</span> <span class="n">pm</span> <span class="o">=</span> <span class="n">mContext</span><span class="o">.</span><span class="na">getPackageManager</span><span class="o">();</span>
</span><span class='line'>    <span class="n">Intent</span> <span class="n">intent</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Intent</span><span class="o">(</span><span class="n">Intent</span><span class="o">.</span><span class="na">ACTION_VIEW</span><span class="o">);</span>
</span><span class='line'>    <span class="n">intent</span><span class="o">.</span><span class="na">setData</span><span class="o">(</span><span class="n">Uri</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="s">&quot;http://www.google.com&quot;</span><span class="o">));</span>
</span><span class='line'>    <span class="n">ResolveInfo</span> <span class="n">info</span> <span class="o">=</span> <span class="n">pm</span><span class="o">.</span><span class="na">resolveActivity</span><span class="o">(</span><span class="n">intent</span><span class="o">,</span> <span class="n">PackageManager</span><span class="o">.</span><span class="na">MATCH_DEFAULT_ONLY</span><span class="o">);</span>
</span><span class='line'>    <span class="n">Log</span><span class="o">.</span><span class="na">i</span><span class="o">(</span><span class="n">VIEW_LOG_TAG</span><span class="o">,</span> <span class="s">&quot;getDefaultActivity info = &quot;</span> <span class="o">+</span> <span class="n">info</span> <span class="o">+</span> <span class="s">&quot;;pkgName = &quot;</span> <span class="o">+</span> <span class="n">info</span><span class="o">.</span><span class="na">activityInfo</span><span class="o">.</span><span class="na">packageName</span><span class="o">);</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Result before I set Maxthon Browser as the default one. If no default one is set, the system will call the com.android.internal.app.ResolverActivity</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">I</span><span class="o">/</span><span class="n">View</span>    <span class="o">(</span> <span class="mi">1145</span> <span class="o">):</span> <span class="n">View</span> <span class="n">getDefaultActivity</span> <span class="n">info</span> <span class="o">=</span> <span class="n">ResolveInfo</span><span class="o">{</span><span class="mi">410</span><span class="n">e4868</span> <span class="n">com</span><span class="o">.</span><span class="na">android</span><span class="o">.</span><span class="na">internal</span><span class="o">.</span><span class="na">app</span><span class="o">.</span><span class="na">ResolverActivity</span> <span class="n">p</span><span class="o">=</span><span class="mi">0</span> <span class="n">o</span><span class="o">=</span><span class="mi">0</span> <span class="n">m</span><span class="o">=</span><span class="mh">0x0</span><span class="o">};</span><span class="n">pkgName</span> <span class="o">=</span> <span class="n">android</span>
</span></code></pre></td></tr></table></div></figure>


<p>Result after I set Maxthon Browser as the default one. If the default one is set just call the default activity</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">I</span><span class="o">/</span><span class="n">View</span>    <span class="o">(</span> <span class="mi">1145</span> <span class="o">):</span> <span class="n">View</span> <span class="n">getDefaultActivity</span> <span class="n">info</span> <span class="o">=</span> <span class="n">ResolveInfo</span><span class="o">{</span><span class="mi">410</span><span class="n">ae1e8</span> <span class="n">com</span><span class="o">.</span><span class="na">mx</span><span class="o">.</span><span class="na">browser</span><span class="o">.</span><span class="na">MxBrowserActivity</span> <span class="n">p</span><span class="o">=</span><span class="mi">0</span> <span class="n">o</span><span class="o">=</span><span class="mi">0</span> <span class="n">m</span><span class="o">=</span><span class="mh">0x208000</span><span class="o">};</span><span class="n">pkgName</span> <span class="o">=</span> <span class="n">com</span><span class="o">.</span><span class="na">mx</span><span class="o">.</span><span class="na">browser</span>
</span></code></pre></td></tr></table></div></figure>


<p>So it is really clear that you could use the following code to judge.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="c1">//Use this to determine whether default application is set or not</span>
</span><span class='line'><span class="kt">boolean</span> <span class="n">defaultSet</span> <span class="o">=</span> <span class="o">!</span><span class="s">&quot;android&quot;</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">info</span><span class="o">.</span><span class="na">activityInfo</span><span class="o">.</span><span class="na">packageName</span><span class="o">);</span>
</span></code></pre></td></tr></table></div></figure>


<h3>If the default one is already set</h3>

<p>Just remove the preferred settings of the default application. However you could not do this in the code due to the permission control. It&rsquo;s generally done by users manually. What you could do is lead the user to the clear default page(installedAppDetails)</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">public</span> <span class="kt">void</span> <span class="nf">testStartAppDetails</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>    <span class="c1">//Use the destination package name</span>
</span><span class='line'>    <span class="n">Intent</span> <span class="n">intent</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Intent</span><span class="o">(</span><span class="n">android</span><span class="o">.</span><span class="na">provider</span><span class="o">.</span><span class="na">Settings</span><span class="o">.</span><span class="na">ACTION_APPLICATION_DETAILS_SETTINGS</span><span class="o">,</span> <span class="n">Uri</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="s">&quot;package:com.mx.browser&quot;</span><span class="o">));</span>
</span><span class='line'>    <span class="n">getActivity</span><span class="o">().</span><span class="na">startActivity</span><span class="o">(</span><span class="n">intent</span><span class="o">);</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Then you navigate the user to the installedAppDetails and you could show some tips to click Button Clear Default.
<img src="/images/post_images/installed_app_details_clear_default.png">
When users go back from installedAppDetails to your application check is there any default appliction now. If the default application(in general, it&rsquo;s not the previous one) remains repeat the above actions until there is not default one.</p>

<h3>No default One</h3>

<p>Now there is only one step to set ours as the default one. You could not do this in codes. It&rsquo;s also required manual operation. What you could do is popup the selecting dialog and tip the use select your one.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">public</span> <span class="kt">void</span> <span class="nf">testStartChooseDialog</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">Intent</span> <span class="n">intent</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Intent</span><span class="o">();</span>
</span><span class='line'>    <span class="n">intent</span><span class="o">.</span><span class="na">setAction</span><span class="o">(</span><span class="s">&quot;android.intent.action.VIEW&quot;</span><span class="o">);</span>
</span><span class='line'>    <span class="n">intent</span><span class="o">.</span><span class="na">addCategory</span><span class="o">(</span><span class="s">&quot;android.intent.category.BROWSABLE&quot;</span><span class="o">);</span>
</span><span class='line'>    <span class="n">intent</span><span class="o">.</span><span class="na">setData</span><span class="o">(</span><span class="n">Uri</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="s">&quot;http://androidyue.github.io/&quot;</span><span class="o">));</span>
</span><span class='line'>    <span class="n">intent</span><span class="o">.</span><span class="na">setComponent</span><span class="o">(</span><span class="k">new</span> <span class="n">ComponentName</span><span class="o">(</span><span class="s">&quot;android&quot;</span><span class="o">,</span><span class="s">&quot;com.android.internal.app.ResolverActivity&quot;</span><span class="o">));</span>
</span><span class='line'>    <span class="n">getActivity</span><span class="o">().</span><span class="na">startActivity</span><span class="o">(</span><span class="n">intent</span><span class="o">);</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>The dialog is like this <br/>
<img src="/images/post_images/choose_default_activity_dialog.png"><br/>
What&rsquo;s more, your tips is really essential. Make sure to notify that  &ldquo;Use by default for this action&rdquo; should be  checked.</p>

<h3>How to Clear my own default</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">public</span> <span class="kt">void</span> <span class="nf">testClearDefault</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">PackageManager</span> <span class="n">pm</span> <span class="o">=</span> <span class="n">mContext</span><span class="o">.</span><span class="na">getPackageManager</span><span class="o">();</span>
</span><span class='line'>    <span class="n">pm</span><span class="o">.</span><span class="na">clearPackagePreferredActivities</span><span class="o">(</span><span class="n">mContext</span><span class="o">.</span><span class="na">getPackageName</span><span class="o">());</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Note you could only clear packagePreferredActivities of your own.</p>

<h3>A step into system control</h3>

<p>the following settings is some content of /data/system/packages.xml</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="nt">&lt;preferred-activities&gt;</span>
</span><span class='line'><span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;com.mx.browser/.MxBrowserActivity&quot;</span> <span class="na">match=</span><span class="s">&quot;200000&quot;</span> <span class="na">set=</span><span class="s">&quot;2&quot;</span><span class="nt">&gt;</span>
</span><span class='line'><span class="nt">&lt;set</span> <span class="na">name=</span><span class="s">&quot;com.android.browser/.BrowserActivity&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'><span class="nt">&lt;set</span> <span class="na">name=</span><span class="s">&quot;com.mx.browser/.MxBrowserActivity&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'><span class="nt">&lt;filter&gt;</span>
</span><span class='line'><span class="nt">&lt;action</span> <span class="na">name=</span><span class="s">&quot;android.intent.action.VIEW&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'><span class="nt">&lt;cat</span> <span class="na">name=</span><span class="s">&quot;android.intent.category.BROWSABLE&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'><span class="nt">&lt;cat</span> <span class="na">name=</span><span class="s">&quot;android.intent.category.DEFAULT&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'><span class="nt">&lt;scheme</span> <span class="na">name=</span><span class="s">&quot;http&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'><span class="nt">&lt;/filter&gt;</span>
</span><span class='line'><span class="nt">&lt;/item&gt;</span>
</span><span class='line'><span class="nt">&lt;/preferred-activities&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Special</h3>

<ul>
<li>What will system do if I install or uninstall a related  application?</li>
<li>Actually the system provide you a special chance to rechoose if a related activity is added or removed. When you click the url it should popup a dialog not use the previous preferred activity.</li>
<li>When the system popup the choosing dialog?</li>
<li>After some tests I guess the system will make  a list of  interested activities instantly. And then use the previous list to compare with the list stored in /data/system/packages.xml. If they are not the same, the choose dialog should be poped up.</li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/01/04/package-stop-state-since-android-3-dot-1/">Package Stopped State Since Android 3.1</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-01-04T20:07:00+08:00" pubdate data-updated="true">Jan 4<span>th</span>, 2014</time>
        
         | <a href="/blog/2014/01/04/package-stop-state-since-android-3-dot-1/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>First Bite</h2>

<p>Since Android 3.1, Android has introduced a LaunchControl mechanism. It&rsquo;s call Stopped State.
Here is what Google describes</p>

<h4>What is Stopped State</h4>

<blockquote><p>Starting from Android 3.1, the system&rsquo;s package manager keeps track of applications that are in a stopped state and provides a means of controlling their launch from background processes and other applications.</p>

<p>Note that an application&rsquo;s stopped state is not the same as an Activity&rsquo;s stopped state. The system manages those two stopped states separately.</p></blockquote>

<h4>Why Android Adds this</h4>

<blockquote><p>Note that the system adds FLAG_EXCLUDE_STOPPED_PACKAGES to all broadcast intents. It does this to prevent broadcasts from background services from inadvertently or unnecessarily launching components of stoppped applications. A background service or application can override this behavior by adding the FLAG_INCLUDE_STOPPED_PACKAGES flag to broadcast intents that should be allowed to activate stopped applications.</p></blockquote>

<p>As the above references point out it will prevent broadcast intents delivering to stopped packages. Actually this control mechanism will ensure safety and save energy.</p>

<h2>State Switch from/to Stopped State</h2>

<p>What Google says</p>

<blockquote><p>Applications are in a stopped state when they are first installed but are not yet launched and when they are manually stopped by the user (in Manage Applications).</p></blockquote>

<h3>To Stopped Sate</h3>

<ul>
<li>Manually force-stop in Manage Application of Settings.</li>
<li>adb shell am force-stop package-name</li>
<li>Use Hidden Method ActivityManager.forceStopPackages(String packageName) with Right Permission &lt;uses-permission android:name=&ldquo;android.permission.FORCE_STOP_PACKAGES&rdquo;/> It&rsquo;s without test.</li>
</ul>


<h3>To Normal State (Not Stopped)</h3>

<ul>
<li>Manually Launch your application.</li>
<li>Use adb to Activate components(Activity or Receiver ) of the application</li>
</ul>


<h2>Send Broadcast Intent to Stopped Packages</h2>

<blockquote><p>The platform defines two new intent flags that let a sender specify whether the Intent should be allowed to activate components in stopped application.</p>

<p>FLAG_INCLUDE_STOPPED_PACKAGES — Include intent filters of stopped applications in the list of potential targets to resolve against.
FLAG_EXCLUDE_STOPPED_PACKAGES — Exclude intent filters of stopped applications from the list of potential targets.
When neither or both of these flags is defined in an intent, the default behavior is to include filters of stopped applications in the list of potential targets.</p></blockquote>

<ul>
<li>Add your Intent Flag FLAG_INCLUDE_STOPPED_PACKAGES in Java</li>
<li>Use ADB with Flag FLAG_INCLUDE_STOPPED_PACKAGES such as <strong>adb shell am broadcast -a com.android.vending.INSTALL_REFERRER -f 32</strong></li>
</ul>


<h2>Check Package Stopped</h2>

<ul>
<li>Manually Check InstalledAppDetails in Manage applications of Settings.</li>
<li>Step into Terminal of the Device and <strong>cat /data/system/packages-stopped.xml</strong></li>
</ul>


<h2>special Issues</h2>

<ul>
<li>Q:If My application has no activities and it just has a receiver, How can I activate and receive common broadcast intents?</li>
<li><p>A:Actually your above application is actually Not Stopped State when it&rsquo;s first installed. Becuase It has no launcher clickable chance. It can receive normal broadcast smoothly If you do not manually force-stop it.</p></li>
<li><p>Q:Will the system application be in stopped state when it&rsquo;s first installed?</p></li>
<li><p>A:The apps located in /system/app are what we called System Applications. It&rsquo;s Not in stopped state when it&rsquo;s installed.</p></li>
<li><p>Q:Will Google Play App still sends campaign broadcast to my application to keep track of install referrers?</p></li>
<li>A:Actually It does work smoothly. And I have tested on 4.0 OS device. I think the Play Store App adds FLAG_INCLUDE_STOPPED_PACKAGES to the broadcast intent.</li>
</ul>


<h2>Referrences Links</h2>

<ul>
<li><a href="http://developer.android.com/about/versions/android-3.1.html">http://developer.android.com/about/versions/android-3.1.html</a></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/01/04/ri-yu-wen-fa-kudasai/">日语文法:ください</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-01-04T15:59:00+08:00" pubdate data-updated="true">Jan 4<span>th</span>, 2014</time>
        
         | <a href="/blog/2014/01/04/ri-yu-wen-fa-kudasai/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>Nをください</h2>

<ul>
<li>意思：请&hellip;</li>
<li>例句：</li>
<li>りんごをください　　请把苹果给我</li>
<li>ほんを私にください　请把书给我一下。</li>
</ul>


<h2>动词て形+ください</h2>

<ul>
<li>意思：请&hellip;</li>
<li>例句：</li>
<li>座ってください　　请坐</li>
<li>食べてください　　请品尝一下</li>
</ul>


<h2>动词未然形+ないでください</h2>

<ul>
<li>意思：请不要&hellip;</li>
<li>例句:</li>
<li>写真を撮らないでください　请不要拍照</li>
<li>心配しないでください　　　请不要担心</li>
</ul>


<p>以上三种中的<strong>ください</strong>都可以替换成<strong>くださいませんか</strong>，这样显得更加礼貌。
ください前面可以接动词的连用形，包括第一连用形和第二连用形。关于动词连用形请参考<a href="http://bulo.hujiang.com/question/192068/###">http://bulo.hujiang.com/question/192068/###</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/12/28/fix-missing-command-takes-too-long-to-respond-in-fedora/">Fix Missing Command Takes Too Long to Respond in Fedora</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-12-28T21:51:00+08:00" pubdate data-updated="true">Dec 28<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/12/28/fix-missing-command-takes-too-long-to-respond-in-fedora/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I am getting well on with Fedora now. However when I was a fresher to Fedora, I have met a lot of problems. <br/>
One of them is that When I type some wrong commands It will take too long to respond. It&rsquo;s totally different from Ubuntu,which I used before. However I like it could quickly reponse even through the command does not exist.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nb">unset </span>command_not_found_handle
</span></code></pre></td></tr></table></div></figure>


<p>Ok.Add the above code to .bashrc And it works.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/12/28/bashbites-check-files/">BashBites:Check Files</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-12-28T10:38:00+08:00" pubdate data-updated="true">Dec 28<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/12/28/bashbites-check-files/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>Check a file exists</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c">#!/bin/bash</span>
</span><span class='line'><span class="k">if</span> <span class="o">[[</span> -e /tmp/adb.log  <span class="o">]]</span>
</span><span class='line'><span class="k">then</span>
</span><span class='line'><span class="k">    </span><span class="nb">echo</span> <span class="s2">&quot;Exists&quot;</span>
</span><span class='line'><span class="k">else</span>
</span><span class='line'><span class="k">    </span><span class="nb">echo</span> <span class="s2">&quot;Not Exists&quot;</span>
</span><span class='line'><span class="k">fi</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Check Empty String</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="k">if</span> <span class="o">[[</span> -z <span class="s2">&quot;$emptyString&quot;</span>  <span class="o">]]</span>
</span><span class='line'><span class="k">then</span>
</span><span class='line'><span class="k">    </span><span class="nb">echo</span> <span class="s2">&quot;Empty&quot;</span>
</span><span class='line'><span class="k">else</span>
</span><span class='line'><span class="k">    </span><span class="nb">echo</span> <span class="s2">&quot;Not Empty&quot;</span>
</span><span class='line'><span class="k">fi</span>
</span></code></pre></td></tr></table></div></figure>


<p>Here is a reference material from Stackoverflow<a href="http://stackoverflow.com/questions/3767267/check-if-file-exists">http://stackoverflow.com/questions/3767267/check-if-file-exists</a></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="o">-</span><span class="n">d</span> <span class="n">FILE</span>
</span><span class='line'>    <span class="n">FILE</span> <span class="n">exists</span> <span class="ow">and</span> <span class="ow">is</span> <span class="n">a</span> <span class="n">directory</span>
</span><span class='line'><span class="o">-</span><span class="n">e</span> <span class="n">FILE</span>
</span><span class='line'>    <span class="n">FILE</span> <span class="n">exists</span>
</span><span class='line'><span class="o">-</span><span class="n">f</span> <span class="n">FILE</span>
</span><span class='line'>    <span class="n">FILE</span> <span class="n">exists</span> <span class="ow">and</span> <span class="ow">is</span> <span class="n">a</span> <span class="n">regular</span> <span class="nb">file</span>
</span><span class='line'><span class="o">-</span><span class="n">h</span> <span class="n">FILE</span>
</span><span class='line'>    <span class="n">FILE</span> <span class="n">exists</span> <span class="ow">and</span> <span class="ow">is</span> <span class="n">a</span> <span class="n">symbolic</span> <span class="n">link</span> <span class="p">(</span><span class="n">same</span> <span class="k">as</span> <span class="o">-</span><span class="n">L</span><span class="p">)</span>
</span><span class='line'><span class="o">-</span><span class="n">r</span> <span class="n">FILE</span>
</span><span class='line'>    <span class="n">FILE</span> <span class="n">exists</span> <span class="ow">and</span> <span class="ow">is</span> <span class="n">readable</span>
</span><span class='line'><span class="o">-</span><span class="n">s</span> <span class="n">FILE</span>
</span><span class='line'>    <span class="n">FILE</span> <span class="n">exists</span> <span class="ow">and</span> <span class="n">has</span> <span class="n">a</span> <span class="n">size</span> <span class="n">greater</span> <span class="n">than</span> <span class="n">zero</span>
</span><span class='line'><span class="o">-</span><span class="n">w</span> <span class="n">FILE</span>
</span><span class='line'>    <span class="n">FILE</span> <span class="n">exists</span> <span class="ow">and</span> <span class="ow">is</span> <span class="n">writable</span>
</span><span class='line'><span class="o">-</span><span class="n">x</span> <span class="n">FILE</span>
</span><span class='line'>    <span class="n">FILE</span> <span class="n">exists</span> <span class="ow">and</span> <span class="ow">is</span> <span class="n">executable</span>
</span><span class='line'><span class="o">-</span><span class="n">z</span> <span class="n">STRING</span>
</span><span class='line'>    <span class="n">the</span> <span class="n">length</span> <span class="n">of</span> <span class="n">STRING</span> <span class="ow">is</span> <span class="n">zero</span>
</span></code></pre></td></tr></table></div></figure>


<p>For more detailed information, please visit <a href="http://linux.about.com/library/cmd/blcmdl1_test.htm">http://linux.about.com/library/cmd/blcmdl1_test.htm</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/12/28/bashbites-loop-through-in-a-directory/">BashBites:Loop Through in a Directory</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-12-28T10:12:00+08:00" pubdate data-updated="true">Dec 28<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/12/28/bashbites-loop-through-in-a-directory/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>The trick is really easy. Just to keep record.Here we take the /tmp folder as the desired one.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c">#!/bin/bash </span>
</span><span class='line'><span class="nb">cd</span> /tmp
</span><span class='line'><span class="k">for </span>file in <span class="sb">`</span>ls<span class="sb">`</span>
</span><span class='line'><span class="k">do</span>
</span><span class='line'><span class="k">    </span><span class="nb">echo</span> <span class="nv">$file</span>
</span><span class='line'><span class="k">done</span>
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/12/15/ri-yu-wen-fa-zong-jie-1/">日语文法例句1</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-12-15T14:19:00+08:00" pubdate data-updated="true">Dec 15<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/12/15/ri-yu-wen-fa-zong-jie-1/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>存在句</h2>

<ul>
<li>机の上に猫がいます</li>
<li>ここに本があります</li>
<li>猫は机の上にいます</li>
<li>本はここにあります</li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/12/14/lian-jie-kuan-dai-cuo-wu-769-wu-fa-lian-jie-dao-zhi-ding-mu-biao/">连接宽带错误769：无法连接到指定目标</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-12-14T18:59:00+08:00" pubdate data-updated="true">Dec 14<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/12/14/lian-jie-kuan-dai-cuo-wu-769-wu-fa-lian-jie-dao-zhi-ding-mu-biao/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>连接宽带错误769：无法连接到指定目标<br/>
相关信息：找不到netcfg.hlp<br/>
原因：禁用了本地连接<br/>
解决方法：启用本地连接</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/12/14/gua-yi-de-huan-jing/">适宜的环境</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-12-14T18:41:00+08:00" pubdate data-updated="true">Dec 14<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/12/14/gua-yi-de-huan-jing/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>适宜的环境，这里介绍适宜的温度和湿度，数据来自TANITA湿度计的附带资料</p>

<h2>夏季</h2>

<ul>
<li>温度：21-25 摄氏度</li>
<li>湿度：55-65%

<h2>冬季</h2></li>
<li>温度：16-20 摄氏度</li>
<li>湿度：45-55%</li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/12/11/start-installedappdetails-activity-with-a-specific-package-name/">Start InstalledAppDetails Activity With a Specific Package Name</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-12-11T16:49:00+08:00" pubdate data-updated="true">Dec 11<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/12/11/start-installedappdetails-activity-with-a-specific-package-name/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>This trick works. It&rsquo;s really easy.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="c1">//Let take com.mx.browser as the package name</span>
</span><span class='line'><span class="n">Intent</span> <span class="n">intent</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Intent</span><span class="o">(</span><span class="n">android</span><span class="o">.</span><span class="na">provider</span><span class="o">.</span><span class="na">Settings</span><span class="o">.</span><span class="na">ACTION_APPLICATION_DETAILS_SETTINGS</span><span class="o">,</span> <span class="n">Uri</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="s">&quot;package:com.mx.browser&quot;</span><span class="o">));</span>
</span><span class='line'><span class="n">startActivity</span><span class="o">(</span><span class="n">intent</span><span class="o">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Here is the javadoc of android.provider.Settings.ACTION_APPLICATION_DETAILS_SETTINGS</p>

<blockquote><p>Activity Action: Show screen of details about a particular application.<br/>
In some cases, a matching Activity may not exist, so ensure you safeguard against this.<br/>
Input: The Intent&rsquo;s data URI specifies the application package name to be shown, with the &ldquo;package&rdquo; scheme. That is &ldquo;package:com.my.app&rdquo;.<br/>
Output: Nothing.</p></blockquote>

<p>A glance at how InstalledAppDetails get packageName</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">final</span> <span class="n">Bundle</span> <span class="n">args</span> <span class="o">=</span> <span class="n">getArguments</span><span class="o">();</span>
</span><span class='line'><span class="n">String</span> <span class="n">packageName</span> <span class="o">=</span> <span class="o">(</span><span class="n">args</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">?</span> <span class="n">args</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="n">ARG_PACKAGE_NAME</span><span class="o">)</span> <span class="o">:</span> <span class="kc">null</span><span class="o">;</span>
</span><span class='line'><span class="k">if</span> <span class="o">(</span><span class="n">packageName</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">Intent</span> <span class="n">intent</span> <span class="o">=</span> <span class="o">(</span><span class="n">args</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">?</span>
</span><span class='line'>    <span class="n">getActivity</span><span class="o">().</span><span class="na">getIntent</span><span class="o">()</span> <span class="o">:</span> <span class="o">(</span><span class="n">Intent</span><span class="o">)</span> <span class="n">args</span><span class="o">.</span><span class="na">getParcelable</span><span class="o">(</span><span class="s">&quot;intent&quot;</span><span class="o">);</span>
</span><span class='line'>    <span class="k">if</span> <span class="o">(</span><span class="n">intent</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">packageName</span> <span class="o">=</span> <span class="n">intent</span><span class="o">.</span><span class="na">getData</span><span class="o">().</span><span class="na">getSchemeSpecificPart</span><span class="o">();</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/2/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <a href="http://stackoverflow.com/users/749727/androidyue">
<img src="http://stackoverflow.com/users/flair/749727.png" width="270" height="58" alt="profile for androidyue at Stack Overflow, Q&amp;A for professional and enthusiast programmers" title="profile for androidyue at Stack Overflow, Q&amp;A for professional and enthusiast programmers">
</a>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014/01/12/set-the-preferred-application-in-android/">Set the Preferred Application in Android</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/01/04/package-stop-state-since-android-3-dot-1/">Package Stopped State Since Android 3.1</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/01/04/ri-yu-wen-fa-kudasai/">日语文法:ください</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/12/28/fix-missing-command-takes-too-long-to-respond-in-fedora/">Fix Missing Command Takes Too Long to Respond in Fedora</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/12/28/bashbites-check-files/">BashBites:Check Files</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/androidyue">@androidyue</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'androidyue',
            count: 11,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>



<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/105362551238192049560?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>


<script type="text/javascript">var switchTo5x=true;</script>
<script type="text/javascript" src="http://w.sharethis.com/button/buttons.js"></script>
<script type="text/javascript" src="http://s.sharethis.com/loader.js"></script>

<script type="text/javascript">stLight.options({publisher: "c4f362f5-c619-4481-a7ab-bc73e42dc601", doNotHash: false, doNotCopy: false, hashAddressBar: true});</script>
<script>
    var options={ "publisher": "c4f362f5-c619-4481-a7ab-bc73e42dc601", "position": "right", "ad": { "visible": false, "openDelay": 5, "closeDelay": 0 }, "chicklets": { "items": ["googleplus", "sina", "facebook", "twitter", "linkedin", "pinterest", "tumblr", "email", "sharethis"] } };
    var st_hover_widget = new sharethis.widgets.hoverbuttons(options);
</script>

  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - androidyue -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'androidyue';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
